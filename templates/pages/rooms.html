<!doctype html>
<html lang="en">

<head>
   <!-- Required meta tags -->
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

   <!-- Bootstrap CSS -->
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
      integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">

   <!-- For Wish List -->
   <link rel="stylesheet" href="/djangohotels.com/static/css/wishlist.css">
   <!-- Custom style sheet -->
   <link rel="stylesheet" href="/djangohotels.com/static/css/style.css">
   <!-- Font Awsome -->
   <script src="https://kit.fontawesome.com/0f42c19b3f.js" crossorigin="anonymous"></script>

   <title>Rooms | Django Hotel - Find Your Home Comfortness</title>
</head>

<body>
   <main>
      <header>
      <nav class="navbar navbar-expand-lg navbar-light bg-white p-lg-5 p-md-3 p-2 mb-lg-3 mb-md-2 mb-1 navbar-shadow">
         <a class="navbar-brand mr-pc font-weight-bolder" href="/djangohotels.com/index.html">Django Hotel</a>
         <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
         </button>

         <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto ml-auto">
               <li id="nav-home" class="nav-item">
                  <a class="nav-link" href="/djangohotels.com/index.html">Home<span class="sr-only">(current)</span></a>
               </li>
               <li id="nav-rooms" class="nav-item">
                  <a class="nav-link" href="/djangohotels.com/templates/pages/rooms.html">Rooms</a>
               </li>
               <li id="nav-about" class="nav-item">
                  <a class="nav-link" href="/djangohotels.com/templates/pages/about.html">About</a>
               </li>
               <li id="nav-contact" class="nav-item">
                  <a class="nav-link" href="/djangohotels.com/templates/pages/contact.html">Contact</a>
               </li>

            </ul>
            <ul class="navbar-nav">
               <li id="nav-user" class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
                     aria-haspopup="true" aria-expanded="false">
                     <i class="fa-solid fa-user mx-2"></i>
                  </a>
                  <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                     <a class="dropdown-item" href="/djangohotels.com/templates/user/profile.html">Profile</a>
                     <a class="dropdown-item" href="/djangohotels.com/templates/room_booking/wishlist.html">Wish List</a>
                     <a class="dropdown-item" href="/djangohotels.com/templates/room_booking/my_booking.html">My booking</a>
                     <div class="dropdown-divider"></div>
                     <a class="dropdown-item" href="/djangohotels.com/templates/pages/management.html">Management</a>
                     <a class="dropdown-item" href="/djangohotels.com/templates/user/login.html">Sign out</a>
                  </div>
               </li>
               <li id="nav-signin" class="nav-item">
                  <a class="nav-link" href="/djangohotels.com/templates/user/login.html">Sign in</a>
               </li>
               <li id="nav-signup" class="nav-item">
                  <a class="nav-link " href="/djangohotels.com/templates/user/register.html">Sign up</a>
               </li>
            </ul>
         </div>
      </nav>
   </header>
   </main>
   <div class="clearfix">

</div>
<section>
    <div class="container pt-5">
        <h2 class="mr-pc">Rooms</h2>
        <div class="py-3">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="standard-room-tab" data-toggle="tab" type="button" role="tab"
                        aria-controls="home" aria-selected="true">Standard</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="delux-room-tab" data-toggle="tab" type="button" role="tab"
                        aria-controls="profile" aria-selected="false">Deluxe</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="family-suit-tab" data-toggle="tab" type="button" role="tab"
                        aria-controls="contact" aria-selected="false">Family Suite</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="business-suit-tab" data-toggle="tab" type="button" role="tab"
                        aria-controls="contact" aria-selected="false">Business Suite</button>
                </li>
            </ul>
        </div>

        <div class="my-3">
            <div id="rooms" class="row row-cols-1 row-cols-md-3 g-4">
                <div class="col ">
                    <div class="card h-100 room-card">
                        <img src="https://images.unsplash.com/photo-1631049307264-da0ec9d70304?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"
                            class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title mr-pc" style="text-transform: uppercase;">{{room.style}}</h5>
                            <p class="card-text">This is a wider card with supporting text below as a natural lead-in to
                                additional content. This content is a little bit longer.</p>
                        </div>
                        <ul class="list-group list-group-flush border-0">
                            <li class="list-group-item text-center font-weight-bold mr-pc">$</li>
                        </ul>
                        <div class="card-footer bg-transparent text-center">
                            <small class="text-muted">
                                <a class="text-center "
                                    href="{% url 'room_details' %}?roomNumber={{room.room_number}}">Details</a>
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<footer>
   <div class="row justify-content-around mt-5 pt-5">
      <div class="col-4">
         <div class="row">
            <div class="col d-flex justify-content-end align-items-center">
               <h2 class="mr-pc"><i class="fa-solid fa-phone"></i></h2>
            </div>
            <div class="col">
               <p>Have any questions?</p>
               <p>+91 9988776655</p>
            </div>
         </div>

      </div>
      <div class="col-4">
         <div class="row">
            <div class="col d-flex justify-content-end align-items-center">
               <h2 class="mr-pc"><i class="fa-solid fa-envelope"></i></h2>

            </div>
            <div class="col">
               <p>Have any questions?</p>
               <p>info@djangohotels.com</p>
            </div>
         </div>
      </div>
   </div>
   <div class="row">
      <!-- Copyright -->
      <div class="col d-flex justify-content-center">
         <p>Â© 2024 Copyright: <span class="mr-pc font-weight-bold">Django Hotel</span> </p>
      </div>
      <!-- Copyright -->
   </div>
</footer>

<script>
      const navItems = document.getElementsByClassName('nav-item');
      for (const navItem of navItems) {
         navItem.classList.remove('active');
      }

      const activeNavItem = document.getElementById('{{active_nav_item}}');
      activeNavItem.classList.add('active');
</script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous">
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
      crossorigin="anonymous">
</script>
<script>
   // Add bootstrap class for styling the choice input filed in search
   const elm = document.getElementById("id_room_type");
   elm.classList.add('custom-select')
</script>
<script>
    const roomsElm = document.getElementById("rooms")
    const imgUrl = 'https://images.unsplash.com/photo-1631049307264-da0ec9d70304?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80'
    const updateRoomsElement = (filteredRooms) => {
        let innerHtml = ""
        filteredRooms.forEach((room, idx) => {
            innerHtml += `
            <div class="col ">
                    <div class="card h-100 room-card">
                        <img src="${imgUrl}"
                            class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title mr-pc" style="text-transform: uppercase;">${room.style}</h5>
                            <p class="card-text">This is a wider card with supporting text below as a natural lead-in to
                                additional content. This content is a little bit longer.</p>
                        </div>
                        <ul class="list-group list-group-flush border-0">
                            <li class="list-group-item text-center font-weight-bold mr-pc">$${room.booking_price}</li>
                        </ul>
                        <div class="card-footer bg-transparent text-center">
                            <small class="text-muted">
                                <a class="text-center "
                                    href="{% url 'room_details' %}?roomNumber=${room.room_number}">Details</a>
                            </small>
                        </div>
                    </div>
                </div>
            `
        }, null)

        roomsElm.innerHTML = innerHtml;
    }
    async function fetchFilteredRooms(roomType) {
        const url = `http://127.0.0.1:8000/hms/rooms/${roomType}`;
        const res = await fetch(url, { "method": "GET" });
        const res_data = await res.json();

        updateRoomsElement(res_data.filtered_rooms)
    }


    const standardRoomElm = document.getElementById("standard-room-tab")
    const deluxRoomElm = document.getElementById("delux-room-tab")
    const familySuitElm = document.getElementById("family-suit-tab")
    const businessSuitElm = document.getElementById("business-suit-tab")

    standardRoomElm.addEventListener('click', () => fetchFilteredRooms("standard"))
    deluxRoomElm.addEventListener('click', () => fetchFilteredRooms("delux"))
    familySuitElm.addEventListener('click', () => fetchFilteredRooms("family"))
    businessSuitElm.addEventListener('click', () => fetchFilteredRooms("business"))

</script>
</body>
</html>
